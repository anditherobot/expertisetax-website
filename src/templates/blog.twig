{% extends 'base.twig' %}

{% block content %}
<main class="container py-5 blog-page resources-page">
    <header class="text-center mb-5">
        <h1 class="fw-bold display-5 text-dark">Resources</h1>
    </header>

    {% if posts|length > 0 %}
    <section class="mb-5">
        <h2 class="h3 fw-bold text-dark mb-3">Service spotlights</h2>
        <div class="row g-4">
            {% for post in posts %}
                <div class="col-12">
                    <article class="card h-100 shadow-sm border-0">
                        <div class="card-body d-flex flex-column">
                            {% if post.type != 'service' %}
                                <span class="badge bg-light text-success border border-success fw-semibold mb-2">{{ post.badge }}</span>
                            {% endif %}
                            <h3 class="h4 fw-bold mb-2">
                                <a class="blog-title-link" href="{{ post.url }}">{{ post.title }}</a>
                            </h3>
                            <p class="text-muted mb-0">{{ post.summary }}</p>
                        </div>
                    </article>
                </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    {% set resourceList = resources|default([]) %}
    {% if resourceList|length > 0 %}
    <section class="mt-5">
        <h2 class="h3 fw-bold text-dark mb-3">Resources</h2>
        <div class="row g-4">
            {% for resource in resourceList %}
                <div class="col-12 col-md-6 col-lg-4">
                    <article class="card h-100 border-0 shadow-sm resource-card">
                        {% if resource.type == 'image' %}
                            <div class="ratio ratio-4x3 resource-media">
                                <img src="{{ resource.file }}" alt="{{ resource.title }}" class="resource-thumb">
                            </div>
                        {% elseif resource.type == 'video' %}
                            <div class="ratio ratio-16x9 resource-media">
                                <video class="resource-thumb" controls preload="metadata"{% if resource.poster %} poster="{{ resource.poster }}"{% endif %}>
                                    <source src="{{ resource.file }}" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                            </div>
                        {% else %}
                            <div class="resource-file d-flex align-items-center justify-content-center">
                                <span class="resource-file-label">PDF</span>
                            </div>
                        {% endif %}
                        <div class="card-body d-flex flex-column">
                            <span class="badge bg-light text-success border border-success fw-semibold align-self-start mb-2">{{ resource.category }}</span>
                            <h3 class="h5 fw-bold text-dark mb-2">{{ resource.title }}</h3>
                            <p class="text-dark flex-grow-1 mb-3">{{ resource.description }}</p>
                            <a class="btn btn-outline-light w-100" href="{{ resource.file }}" target="_blank" rel="noopener"{% if resource.type == 'pdf' %} download{% endif %}>{{ resource.cta }}</a>
                        </div>
                    </article>
                </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    <section class="mt-5">
        <div class="card border-0 shadow-sm">
            <div class="card-body p-4 p-md-5 d-flex flex-column flex-md-row align-items-md-center">
                <div>
                    <h2 class="h4 fw-bold mb-2 text-dark">Have a question about your return?</h2>
                    <p class="mb-0 text-muted">Call 617-352-5993 or message us and we will guide you to the right service.</p>
                </div>
                <div class="ms-md-auto mt-3 mt-md-0 d-flex gap-2">
                    <a class="btn btn-primary" href="/contact">Contact us</a>
                    <a class="btn btn-light border border-primary" href="tel:+1-617-352-5993">Call now</a>
                </div>
            </div>
        </div>
    </section>
</main>
{% endblock %}
